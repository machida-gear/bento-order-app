# ドキュメント一覧

このディレクトリには、お弁当注文 Web アプリケーションのすべてのドキュメントが含まれています。

---

## 📋 チャット開始時に最初に読むべきドキュメント

新しいチャットセッションを開始する際は、以下の順序でドキュメントを読んでください：

1. **[CHANGELOG.md](./CHANGELOG.md)** - 変更履歴（最新の変更内容を把握）
2. **[DECISIONS.md](./DECISIONS.md)** - 設計上の重要な判断と理由
3. **[PROGRESS.md](./PROGRESS.md)** - プロジェクト進捗状況（実装済み・未実装の機能）
4. **[SPEC.md](./SPEC.md)** - システム仕様書（全体の仕様と要件）
5. **[TODO.md](./TODO.md)** - 実装タスク一覧（次に実装すべき作業）

**読んだ後は、以下を整理してください：**

- 「現状の要約」
- 「確定事項」
- 「未解決」
- 「次にやること」

---

## 📚 ドキュメント分類

### 基本ドキュメント（必須）

| ファイル名                     | 説明       | 用途                       |
| ------------------------------ | ---------- | -------------------------- |
| [CHANGELOG.md](./CHANGELOG.md) | 変更履歴   | 時系列での変更内容を確認   |
| [DECISIONS.md](./DECISIONS.md) | 設計判断   | 設計方針と理由を理解       |
| [PROGRESS.md](./PROGRESS.md)   | 進捗状況   | 実装済み・未実装機能を把握 |
| [SPEC.md](./SPEC.md)           | 仕様書     | システム全体の仕様を理解   |
| [TODO.md](./TODO.md)           | タスク一覧 | 次に実装すべき作業を確認   |

### データベース関連ドキュメント

| ファイル名                                                                               | 説明                 | 関連する基本ドキュメント      |
| ---------------------------------------------------------------------------------------- | -------------------- | ----------------------------- |
| [実際のデータベーススキーマ.md](./実際のデータベーススキーマ.md)                         | 実際の DB 構造の詳細 | SPEC.md, DECISIONS.md         |
| [データベース構造の注意事項.md](./データベース構造の注意事項.md)                         | DB 構造の注意点      | 実際のデータベーススキーマ.md |
| [データベーススキーマに基づくコード修正.md](./データベーススキーマに基づくコード修正.md) | コード修正の記録     | CHANGELOG.md                  |
| [audit_logs外部キー制約修正_ユーザー削除時の監査ログ保持.md](./audit_logs外部キー制約修正_ユーザー削除時の監査ログ保持.md) | audit_logs.actor_id 外部キー制約修正 | CHANGELOG.md, SPEC.md, DECISIONS.md |

### 実装詳細ドキュメント

| ファイル名                                                                                                   | 説明                                                          | 関連する基本ドキュメント                             |
| ------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------- | ---------------------------------------------------- |
| [Next.js16 型エラー修正と Vercel デプロイ対応.md](./Next.js16型エラー修正とVercelデプロイ対応.md)            | Next.js 16.1.1 の型エラー修正と Vercel デプロイ対応           | CHANGELOG.md, PROGRESS.md                            |
| [注文機能の実装と問題解決.md](./注文機能の実装と問題解決.md)                                                 | 注文機能の実装過程                                            | PROGRESS.md, SPEC.md                                 |
| [カレンダー注文表示機能の実装.md](./カレンダー注文表示機能の実装.md)                                         | カレンダー機能の実装                                          | PROGRESS.md, SPEC.md                                 |
| [カレンダー注文表示問題のデバッグと解決.md](./カレンダー注文表示問題のデバッグと解決.md)                     | デバッグ過程                                                  | CHANGELOG.md                                         |
| [カレンダー注文表示問題の解決とキャンセル機能追加.md](./カレンダー注文表示問題の解決とキャンセル機能追加.md) | 問題解決と機能追加                                            | CHANGELOG.md                                         |
| [カレンダー管理機能の改善とシステム設定機能の実装.md](./カレンダー管理機能の改善とシステム設定機能の実装.md) | カレンダー管理機能の改善とシステム設定機能の実装              | PROGRESS.md, SPEC.md, CHANGELOG.md                   |
| [システム設定機能の拡張とユーザー管理機能の実装.md](./システム設定機能の拡張とユーザー管理機能の実装.md)     | システム設定機能の拡張とユーザー管理機能の実装                | PROGRESS.md, SPEC.md, CHANGELOG.md                   |
| [ユーザー管理機能の改善とセキュリティ強化.md](./ユーザー管理機能の改善とセキュリティ強化.md)                 | ユーザー管理機能の改善とセキュリティ強化                      | PROGRESS.md, SPEC.md, CHANGELOG.md                   |
| [レポート機能と価格管理機能の改善.md](./レポート機能と価格管理機能の改善.md)                                 | レポート機能と価格管理機能の改善                              | PROGRESS.md, SPEC.md, CHANGELOG.md                   |
| [メニュー表示問題の解決手順.md](./メニュー表示問題の解決手順.md)                                             | メニュー表示問題の解決                                        | CHANGELOG.md                                         |
| [自動注文機能の実装.md](./自動注文機能の実装.md)                                                             | 自動注文機能の実装詳細                                        | PROGRESS.md, SPEC.md                                 |
| [管理者機能の実装.md](./管理者機能の実装.md)                                                                 | 管理者機能の実装詳細                                          | PROGRESS.md, SPEC.md                                 |
| [注文一覧機能の実装.md](./注文一覧機能の実装.md)                                                             | 注文一覧機能の実装詳細                                        | PROGRESS.md, SPEC.md, CHANGELOG.md                   |
| [レポート機能の改善と PDF 出力機能の実装.md](./レポート機能の改善とPDF出力機能の実装.md)                     | レポート機能の改善と PDF 出力機能の実装                       | PROGRESS.md, SPEC.md, CHANGELOG.md                   |
| [PDF 出力機能のフォント問題解決と日本語対応.md](./PDF出力機能のフォント問題解決と日本語対応.md)              | PDF 出力機能のフォント問題解決と日本語対応                    | PROGRESS.md, SPEC.md, CHANGELOG.md                   |
| [PDF 生成機能の改善と発注書形式への変更.md](./PDF生成機能の改善と発注書形式への変更.md)                      | PDF 生成機能の改善と発注書形式への変更                        | PROGRESS.md, SPEC.md, CHANGELOG.md                   |
| [住所 2 行分割と PDF 改善、監査ログ完全実装.md](./住所2行分割とPDF改善、監査ログ完全実装.md)                 | 住所 2 行分割と PDF 改善、監査ログ完全実装                    | PROGRESS.md, SPEC.md, CHANGELOG.md                   |
| [新規登録制限機能の実装.md](./新規登録制限機能の実装.md)                                                     | 新規登録制限機能の実装（招待コード・社員コードマスター）      | PROGRESS.md, SPEC.md, CHANGELOG.md                   |
| [社員コード変更機能と新規登録方式の変更.md](./社員コード変更機能と新規登録方式の変更.md)                     | 社員コード変更機能と新規登録方式の変更（承認方式への移行）    | PROGRESS.md, SPEC.md, CHANGELOG.md, DECISIONS_new.md |
| [ユーザー削除と注文データ保護.md](./ユーザー削除と注文データ保護.md)                                         | ユーザー削除時の注文データ保護機能                            | CHANGELOG.md, DECISIONS.md, SPEC.md                  |
| [ダッシュボード集計修正とユーザー管理画面改善.md](./ダッシュボード集計修正とユーザー管理画面改善.md)         | ダッシュボード集計修正とユーザー管理画面改善                  | CHANGELOG.md, DECISIONS.md, PROGRESS.md              |
| [管理者による過去の注文入力・削除機能の実装.md](./管理者による過去の注文入力・削除機能の実装.md)             | 管理者による過去の注文入力・削除機能の実装                    | CHANGELOG.md, DECISIONS.md, PROGRESS.md, SPEC.md     |
| [Transaction 接続の使用方法.md](./Transaction接続の使用方法.md)                                              | Transaction connection (6543)の使用方法とパフォーマンス最適化 | CHANGELOG.md, 環境変数設定手順.md                    |
| [Transaction接続対応_注文機能の最適化.md](./Transaction接続対応_注文機能の最適化.md)                         | Transaction connection対応：注文機能の最適化                  | CHANGELOG.md, PROGRESS.md, Transaction接続の使用方法.md |
| [audit_logs外部キー制約修正_ユーザー削除時の監査ログ保持.md](./audit_logs外部キー制約修正_ユーザー削除時の監査ログ保持.md) | audit_logs.actor_id 外部キー制約修正（ON DELETE SET NULL）    | CHANGELOG.md, SPEC.md, DECISIONS.md |
| [招待コード使用回数リセット機能修正_型エラー修正.md](./招待コード使用回数リセット機能修正_型エラー修正.md) | 招待コードリセット機能修正とTypeScript型エラー修正            | CHANGELOG.md, 新規登録制限機能の実装.md |
| [パスワードリセット機能の実装.md](./パスワードリセット機能の実装.md) | パスワードリセット機能の実装（メール内リンクからのパスワード更新、メールテンプレート設定方法含む） | CHANGELOG.md, PROGRESS.md, SPEC.md, 環境変数設定手順.md |
| [カレンダーページMap型シリアライズ問題の解決.md](./カレンダーページMap型シリアライズ問題の解決.md) | カレンダーページのMap型シリアライズ問題とビルドエラーの解決（Next.js 16のprops渡し制限、useSearchParams Suspense要件含む） | CHANGELOG.md, PROGRESS.md, SPEC.md, DECISIONS.md |
| [カレンダーページHydration Mismatchエラー修正.md](./カレンダーページHydration Mismatchエラー修正.md) | カレンダーページのHydration Mismatchエラー修正（React error #418、サーバー・クライアント間の日付計算の不一致解決） | CHANGELOG.md, PROGRESS.md, SPEC.md |
| [カレンダーページ全日付グレーアウト問題修正.md](./カレンダーページ全日付グレーアウト問題修正.md) | カレンダーページの全日付グレーアウト問題修正（`target_date`フォーマット正規化、`orderDaysMap`キーマッピング修正） | CHANGELOG.md, PROGRESS.md, SPEC.md |
| [カレンダーページ過去注文・ちらつき問題修正.md](./カレンダーページ過去注文・ちらつき問題修正.md) | カレンダーページの過去注文クリック・月変更時のちらつき問題修正（`canEditOrder()`削除、`shouldBeGray`チェック修正、`localStorage`による状態保持） | CHANGELOG.md, PROGRESS.md, SPEC.md |

### 運用・設定ドキュメント

| ファイル名                                                                                   | 説明                                                          | 関連する基本ドキュメント              |
| -------------------------------------------------------------------------------------------- | ------------------------------------------------------------- | ------------------------------------- |
| [本番環境デプロイ時のチェックリスト.md](./本番環境デプロイ時のチェックリスト.md)             | デプロイ手順                                                  | PROGRESS.md                           |
| [環境変数設定手順.md](./環境変数設定手順.md)                                                 | 環境変数の設定方法                                            | 本番環境デプロイ時のチェックリスト.md |
| [Transaction 接続の使用方法.md](./Transaction接続の使用方法.md)                              | Transaction connection (6543)の使用方法とパフォーマンス最適化 | 環境変数設定手順.md, CHANGELOG.md     |
| [Transaction接続対応_注文機能の最適化.md](./Transaction接続対応_注文機能の最適化.md)          | Transaction connection対応：注文機能の最適化                  | Transaction接続の使用方法.md, CHANGELOG.md, PROGRESS.md |
| [動作確認手順\_注文機能.md](./動作確認手順_注文機能.md)                                      | 動作確認手順                                                  | PROGRESS.md                           |
| [PDF フォント設定手順.md](./PDFフォント設定手順.md)                                          | PDF 生成時の日本語フォント設定手順                            | CHANGELOG.md                          |
| [本番環境 PDF 生成エラー対策チェックリスト.md](./本番環境PDF生成エラー対策チェックリスト.md) | 本番環境での PDF 生成エラー対策                               | 本番環境デプロイ時のチェックリスト.md |

### 開発・テストドキュメント

| ファイル名                                | 説明                       | 関連する基本ドキュメント |
| ----------------------------------------- | -------------------------- | ------------------------ |
| [TESTING.md](./TESTING.md)                | テストガイド               | PROGRESS.md, TODO.md     |
| [README_TESTING.md](../README_TESTING.md) | テスト実行ガイド（ルート） | TESTING.md               |

### その他のドキュメント

| ファイル名                                               | 説明                                   | 関連する基本ドキュメント |
| -------------------------------------------------------- | -------------------------------------- | ------------------------ |
| [ドキュメント更新依頼文.md](./ドキュメント更新依頼文.md) | ドキュメント更新時の依頼文テンプレート | README.md                |

---

## 🔍 ドキュメントの読み方

### 初めてプロジェクトに参加する場合

1. **基本ドキュメントを順番に読む**

   - SPEC.md → DECISIONS.md → PROGRESS.md → TODO.md → CHANGELOG.md

2. **データベース構造を理解する**

   - 実際のデータベーススキーマ.md
   - データベース構造の注意事項.md

3. **実装詳細を確認する（必要に応じて）**
   - 各機能の実装ドキュメントを参照

### 既存機能を修正・拡張する場合

1. **関連する実装詳細ドキュメントを読む**

   - 該当機能の実装ドキュメントを確認

2. **CHANGELOG.md で変更履歴を確認**

   - 過去の変更内容を把握

3. **DECISIONS.md で設計方針を確認**
   - 設計判断の理由を理解

### 新しい機能を実装する場合

1. **SPEC.md で仕様を確認**

   - 機能の要件を理解

2. **DECISIONS.md で設計方針を確認**

   - 設計判断の基準を理解

3. **PROGRESS.md で進捗を確認**

   - 既存の実装状況を把握

4. **TODO.md でタスクを確認**
   - 実装すべきタスクを確認

---

## 📝 ドキュメントの更新ルール

- **CHANGELOG.md**: 仕様変更や重要な実装完了時に更新
- **DECISIONS.md**: 新しい設計判断を追加した時に更新
- **PROGRESS.md**: 実装が完了した時に更新
- **TODO.md**: タスクの進捗に応じて更新
- **実装詳細ドキュメント**: 問題解決や実装完了時に作成・更新

---

## 🔗 関連ファイル

プロジェクトルートの他の重要なファイル：

- `supabase/migrations/` - データベースマイグレーションファイル
  - 最新のマイグレーション: `064_fix_audit_logs_actor_id_fk_set_null.sql`（audit_logs.actor_id 外部キー制約修正）
  - 詳細: `supabase/migrations/README.md`
- `lib/database.types.ts` - データベース型定義
- `vercel.json` - Vercel 設定（Cron Jobs 含む）
- `env.example` - 環境変数の例

---

## 💡 チャット開始時の依頼文テンプレート

新しいチャットセッションを開始する際は、以下のテンプレートを使用してください：

```
まずは以下のファイルを読んで前提条件を引き継いでください。
docs/CHANGELOG.md
docs/DECISIONS.md
docs/PROGRESS.md
docs/SPEC.md
docs/TODO.md

読んだら「現状の要約」「確定事項」「未解決」「次にやること」を短く整理してから着手してください。
また、必要に応じて/docsからMarkdownファイルを読んで内容を理解してください。
```

---

最終更新日: 2026-01-XX（カレンダーページ過去注文・ちらつき問題修正完了時点）
