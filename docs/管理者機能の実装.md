# ç®¡ç†è€…æ©Ÿèƒ½ã®å®Ÿè£…

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€ç®¡ç†è€…æ©Ÿèƒ½ï¼ˆSTEP6ï¼‰ã®å®Ÿè£…å†…å®¹ã‚’è©³ç´°ã«è¨˜éŒ²ã—ã¾ã™ã€‚

> ğŸ“– **é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: [README.md](./README.md) - ã™ã¹ã¦ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¸ã®å‚ç…§

---

## å®Ÿè£…æ¦‚è¦

ç®¡ç†è€…æ©Ÿèƒ½ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ãŒæ³¨æ–‡ã‚·ã‚¹ãƒ†ãƒ ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ç¾¤ã§ã™ã€‚ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã—ãŸï¼š

1. **ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç®¡ç†ç”»é¢** - æ³¨æ–‡å¯èƒ½æ—¥ã¨ç· åˆ‡æ™‚åˆ»ã®è¨­å®š
2. **æ¥­è€…ç®¡ç†ç”»é¢** - æ¥­è€…ã®è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤
3. **ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç®¡ç†ç”»é¢** - ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤
4. **ä¾¡æ ¼ç®¡ç†ç”»é¢** - ä¾¡æ ¼å±¥æ­´ã®è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤
5. **é›†è¨ˆãƒ»CSV å‡ºåŠ›ç”»é¢** - æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿ã®é›†è¨ˆã¨ CSV å‡ºåŠ›

---

## 1. ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç®¡ç†ç”»é¢

### å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«

- `app/admin/calendar/page.tsx` - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç®¡ç†ç”»é¢
- `app/api/admin/calendar/route.ts` - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¨­å®šæ›´æ–° API

### æ©Ÿèƒ½è©³ç´°

#### UI æ©Ÿèƒ½

- æœˆé–“ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®è¡¨ç¤º
- æ—¥ä»˜ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ³¨æ–‡å¯èƒ½æ—¥ã®è¨­å®š
- `is_available` ã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã§åˆ‡ã‚Šæ›¿ãˆ
- `deadline_time` ã®æ™‚åˆ»å…¥åŠ›
- `note` ã®ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã§å‚™è€ƒå…¥åŠ›
- æœˆãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå‰æœˆãƒ»æ¬¡æœˆï¼‰

#### API æ©Ÿèƒ½

- `PUT /api/admin/calendar` - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¨­å®šã®æ›´æ–°ï¼ˆupsertï¼‰

### å®Ÿè£…ã®è©³ç´°

#### ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¨­å®šã®æ›´æ–°

```typescript
// app/api/admin/calendar/route.ts
await supabase.from("order_calendar").upsert(
  {
    target_date,
    is_available: is_available ?? true,
    deadline_time: deadline_time || null,
    note: note || null,
  },
  {
    onConflict: "target_date",
  }
);
```

#### ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®å–å¾—

```typescript
// app/admin/calendar/page.tsx
const { data } = await supabase
  .from("order_calendar")
  .select("*")
  .gte("target_date", startDateStr)
  .lte("target_date", endDateStr)
  .order("target_date", { ascending: true });
```

### æŠ€è¡“çš„ãªæ³¨æ„äº‹é …

- `deadline_time` ã¯ `time` å‹ï¼ˆHH:MM å½¢å¼ï¼‰
- `note` ã¯ä»»æ„ã®æ–‡å­—åˆ—
- `is_available` ãŒ `false` ã®å ´åˆã¯æ³¨æ–‡ä¸å¯æ—¥

---

## 2. æ¥­è€…ç®¡ç†ç”»é¢

### å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«

- `app/admin/vendors/page.tsx` - æ¥­è€…ç®¡ç†ç”»é¢
- `app/api/admin/vendors/route.ts` - æ¥­è€…ä¸€è¦§å–å¾—ãƒ»ä½œæˆ API
- `app/api/admin/vendors/[id]/route.ts` - æ¥­è€…æ›´æ–°ãƒ»å‰Šé™¤ API

### æ©Ÿèƒ½è©³ç´°

#### UI æ©Ÿèƒ½

- æ¥­è€…ä¸€è¦§ã®ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º
- æ–°è¦ä½œæˆãƒœã‚¿ãƒ³
- ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆæ¥­è€…ã‚³ãƒ¼ãƒ‰ã€æ¥­è€…åã€æœ‰åŠ¹/ç„¡åŠ¹ï¼‰
- å‰Šé™¤æ©Ÿèƒ½ï¼ˆ`is_active = false` ã«è¨­å®šï¼‰

#### API æ©Ÿèƒ½

- `GET /api/admin/vendors` - æ¥­è€…ä¸€è¦§å–å¾—
- `POST /api/admin/vendors` - æ¥­è€…ä½œæˆ
- `PUT /api/admin/vendors/[id]` - æ¥­è€…æ›´æ–°
- `DELETE /api/admin/vendors/[id]` - æ¥­è€…å‰Šé™¤ï¼ˆ`is_active = false`ï¼‰

### å®Ÿè£…ã®è©³ç´°

#### æ¥­è€…ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ãƒã‚§ãƒƒã‚¯

```typescript
// ä½œæˆæ™‚
const { data: existing } = await supabase
  .from("vendors")
  .select("id")
  .eq("code", code)
  .maybeSingle();

if (existing) {
  return NextResponse.json(
    { error: "ã“ã®æ¥­è€…ã‚³ãƒ¼ãƒ‰ã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™" },
    { status: 409 }
  );
}

// æ›´æ–°æ™‚ï¼ˆè‡ªåˆ†ä»¥å¤–ã§é‡è¤‡ãƒã‚§ãƒƒã‚¯ï¼‰
const { data: existing } = await supabase
  .from("vendors")
  .select("id")
  .eq("code", code)
  .neq("id", id)
  .maybeSingle();
```

#### å‰Šé™¤å‡¦ç†

```typescript
// DELETE /api/admin/vendors/[id]
await supabase.from("vendors").update({ is_active: false }).eq("id", id);
```

ç‰©ç†å‰Šé™¤ã§ã¯ãªãã€`is_active = false` ã«è¨­å®šã™ã‚‹ã“ã¨ã§ã€éå»ã®æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿ã¨ã®æ•´åˆæ€§ã‚’ä¿ã¤ã€‚

---

## 3. ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç®¡ç†ç”»é¢

### å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«

- `app/admin/menus/page.tsx` - ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç®¡ç†ç”»é¢
- `app/api/admin/menus/route.ts` - ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¸€è¦§å–å¾—ãƒ»ä½œæˆ API
- `app/api/admin/menus/[id]/route.ts` - ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ›´æ–°ãƒ»å‰Šé™¤ API

### æ©Ÿèƒ½è©³ç´°

#### UI æ©Ÿèƒ½

- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¸€è¦§ã®è¡¨ç¤ºï¼ˆæ¥­è€…åˆ¥ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ï¼‰
- æ–°è¦ä½œæˆãƒœã‚¿ãƒ³
- ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆæ¥­è€…é¸æŠã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼åã€æœ‰åŠ¹/ç„¡åŠ¹ï¼‰
- å‰Šé™¤æ©Ÿèƒ½ï¼ˆ`is_active = false` ã«è¨­å®šï¼‰

#### API æ©Ÿèƒ½

- `GET /api/admin/menus` - ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¸€è¦§å–å¾—ï¼ˆæ¥­è€…æƒ…å ±ã‚‚å«ã‚€ï¼‰
- `POST /api/admin/menus` - ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä½œæˆ
- `PUT /api/admin/menus/[id]` - ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ›´æ–°
- `DELETE /api/admin/menus/[id]` - ãƒ¡ãƒ‹ãƒ¥ãƒ¼å‰Šé™¤ï¼ˆ`is_active = false`ï¼‰

### å®Ÿè£…ã®è©³ç´°

#### æ¥­è€…åˆ¥ã‚°ãƒ«ãƒ¼ãƒ—åŒ–

```typescript
// app/admin/menus/page.tsx
const menusByVendor = menus.reduce((acc, menu) => {
  const vendorId = menu.vendor_id;
  if (!acc[vendorId]) {
    acc[vendorId] = [];
  }
  acc[vendorId].push(menu);
  return acc;
}, {} as Record<number, MenuItem[]>);
```

#### æ¥­è€…ã®å­˜åœ¨ç¢ºèª

```typescript
// app/api/admin/menus/route.ts
const { data: vendor } = await supabase
  .from("vendors")
  .select("id")
  .eq("id", vendor_id)
  .single();

if (!vendor) {
  return NextResponse.json(
    { error: "æŒ‡å®šã•ã‚ŒãŸæ¥­è€…ãŒå­˜åœ¨ã—ã¾ã›ã‚“" },
    { status: 404 }
  );
}
```

---

## 4. ä¾¡æ ¼ç®¡ç†ç”»é¢

### å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«

- `app/admin/prices/page.tsx` - ä¾¡æ ¼ç®¡ç†ç”»é¢
- `app/api/admin/prices/route.ts` - ä¾¡æ ¼ä¸€è¦§å–å¾—ãƒ»ä½œæˆ API
- `app/api/admin/prices/[id]/route.ts` - ä¾¡æ ¼æ›´æ–°ãƒ»å‰Šé™¤ API

### æ©Ÿèƒ½è©³ç´°

#### UI æ©Ÿèƒ½

- ä¾¡æ ¼å±¥æ­´ä¸€è¦§ã®è¡¨ç¤ºï¼ˆãƒ¡ãƒ‹ãƒ¥ãƒ¼åˆ¥ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ï¼‰
- æ–°è¦ä½œæˆãƒœã‚¿ãƒ³
- ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆãƒ¡ãƒ‹ãƒ¥ãƒ¼é¸æŠã€ä¾¡æ ¼ã€é–‹å§‹æ—¥ã€çµ‚äº†æ—¥ï¼‰
- å‰Šé™¤æ©Ÿèƒ½ï¼ˆç‰©ç†å‰Šé™¤ï¼‰

#### API æ©Ÿèƒ½

- `GET /api/admin/prices` - ä¾¡æ ¼ä¸€è¦§å–å¾—ï¼ˆãƒ¡ãƒ‹ãƒ¥ãƒ¼æƒ…å ±ã‚‚å«ã‚€ï¼‰
- `POST /api/admin/prices` - ä¾¡æ ¼ä½œæˆ
- `PUT /api/admin/prices/[id]` - ä¾¡æ ¼æ›´æ–°
- `DELETE /api/admin/prices/[id]` - ä¾¡æ ¼å‰Šé™¤

### å®Ÿè£…ã®è©³ç´°

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ ã®ä¸ä¸€è‡´ã¸ã®å¯¾å¿œ

å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã¯ `menu_prices` ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚«ãƒ©ãƒ åã¯ `menu_item_id` ã§ã™ãŒã€å‹å®šç¾©ã§ã¯ `menu_id` ã¨ãªã£ã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã€API ã§ã¯ `as any` ã‚’ä½¿ç”¨ã—ã¦å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

```typescript
// app/api/admin/prices/route.ts
const { data, error } = await(supabase as any)
  .from("menu_prices")
  .insert({
    menu_item_id, // å®Ÿéš›ã®DBã‚«ãƒ©ãƒ å
    price,
    start_date,
    end_date: end_date || null,
  });
```

#### æœŸé–“ã®é‡è¤‡ãƒã‚§ãƒƒã‚¯ï¼ˆç°¡æ˜“ç‰ˆï¼‰

```typescript
const { data: overlapping } = await(supabase as any)
  .from("menu_prices")
  .select("id")
  .eq("menu_item_id", menu_item_id)
  .or(
    `and(start_date.lte.${
      end_date || "9999-12-31"
    },end_date.gte.${start_date}),and(start_date.lte.${
      end_date || "9999-12-31"
    },end_date.is.null)`
  )
  .maybeSingle();
```

**æ³¨æ„**: å®Œå…¨ãªé‡è¤‡ãƒã‚§ãƒƒã‚¯ã¯ `get_menu_price_id` é–¢æ•°ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

#### çµ‚äº†æ—¥ã®æ‰±ã„

- `end_date` ãŒ `null` ã®å ´åˆã¯ç¾åœ¨æœ‰åŠ¹ãªä¾¡æ ¼
- `end_date` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€ãã®æ—¥ä»˜ã¾ã§æœ‰åŠ¹

---

## 5. é›†è¨ˆãƒ»CSV å‡ºåŠ›ç”»é¢

### å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«

- `app/admin/reports/page.tsx` - é›†è¨ˆãƒ»CSV å‡ºåŠ›ç”»é¢
- `app/api/admin/reports/summary/route.ts` - é›†è¨ˆãƒ‡ãƒ¼ã‚¿å–å¾— API
- `app/api/admin/reports/csv/route.ts` - CSV å‡ºåŠ› API
- `app/api/admin/closing-periods/route.ts` - ç· æ—¥æœŸé–“ä¸€è¦§å–å¾— API

### æ©Ÿèƒ½è©³ç´°

#### UI æ©Ÿèƒ½

- ç· æ—¥æœŸé–“ã®é¸æŠï¼ˆãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ï¼‰
- é›†è¨ˆãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤ºï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼ï¼‰
- åˆè¨ˆä»¶æ•°ãƒ»åˆè¨ˆé‡‘é¡ã®è¡¨ç¤º
- CSV ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³

#### API æ©Ÿèƒ½

- `GET /api/admin/closing-periods` - ç· æ—¥æœŸé–“ä¸€è¦§å–å¾—
- `GET /api/admin/reports/summary?period_id=XXX` - é›†è¨ˆãƒ‡ãƒ¼ã‚¿å–å¾—
- `GET /api/admin/reports/csv?period_id=XXX` - CSV ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

### å®Ÿè£…ã®è©³ç´°

#### é›†è¨ˆãƒ‡ãƒ¼ã‚¿ã®å–å¾—

```typescript
// app/api/admin/reports/summary/route.ts
const { data: orders } = await supabase
  .from("orders")
  .select(
    `
    *,
    profiles!orders_user_id_fkey (
      employee_code,
      full_name
    ),
    menu_items!orders_menu_item_id_fkey (
      name,
      vendors (
        code,
        name
      )
    )
  `
  )
  .eq("status", "ordered")
  .gte("order_date", period.start_date)
  .lte("order_date", period.end_date)
  .order("order_date", { ascending: true });
```

#### CSV å‡ºåŠ›

```typescript
// app/api/admin/reports/csv/route.ts
const csvHeader = [
  "æ³¨æ–‡æ—¥",
  "ç¤¾å“¡ã‚³ãƒ¼ãƒ‰",
  "æ°å",
  "æ¥­è€…ã‚³ãƒ¼ãƒ‰",
  "æ¥­è€…å",
  "ãƒ¡ãƒ‹ãƒ¥ãƒ¼å",
  "æ•°é‡",
  "å˜ä¾¡",
  "å°è¨ˆ",
].join(",");

const csvRows = orders.map((order) => {
  const quantity = order.quantity || 0;
  const unitPrice = order.unit_price_snapshot || 0;
  const subtotal = quantity * unitPrice;

  return [
    order.order_date,
    order.profiles?.employee_code || "",
    `"${order.profiles?.full_name || ""}"`,
    order.menu_items?.vendors?.code || "",
    `"${order.menu_items?.vendors?.name || ""}"`,
    `"${order.menu_items?.name || ""}"`,
    quantity,
    unitPrice,
    subtotal,
  ].join(",");
});

const csvContent = [csvHeader, ...csvRows].join("\n");
```

#### CSV ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

```typescript
return new NextResponse(csvContent, {
  headers: {
    "Content-Type": "text/csv; charset=utf-8",
    "Content-Disposition": `attachment; filename="orders_${period.start_date}_${period.end_date}.csv"`,
  },
});
```

---

## ãƒ«ãƒ¼ãƒˆæ§‹é€ ã®ä¿®æ­£

### å•é¡Œ

Next.js ã®ãƒ«ãƒ¼ãƒˆã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆæ‹¬å¼§ã§å›²ã¾ã‚ŒãŸãƒ•ã‚©ãƒ«ãƒ€ï¼‰ã¯ URL ãƒ‘ã‚¹ã«å«ã¾ã‚Œãªã„ãŸã‚ã€ä»¥ä¸‹ã®è¡çªãŒç™ºç”Ÿã—ã¦ã„ã¾ã—ãŸï¼š

- `app/(admin)/calendar` â†’ `/calendar` ã«è§£æ±º
- `app/(user)/calendar` â†’ `/calendar` ã«è§£æ±º

ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ã¾ã—ãŸã€‚

### è§£æ±ºç­–

ç®¡ç†è€…ç”¨ã®ãƒšãƒ¼ã‚¸ã‚’ãƒ«ãƒ¼ãƒˆã‚°ãƒ«ãƒ¼ãƒ—ã‹ã‚‰é€šå¸¸ã®ãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•ã—ã¾ã—ãŸï¼š

- `app/(admin)/calendar` â†’ `app/admin/calendar`
- `app/(admin)/vendors` â†’ `app/admin/vendors`
- `app/(admin)/menus` â†’ `app/admin/menus`
- `app/(admin)/prices` â†’ `app/admin/prices`
- `app/(admin)/reports` â†’ `app/admin/reports`
- `app/(admin)/admin` â†’ `app/admin`ï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼‰
- `app/(admin)/layout.tsx` â†’ `app/admin/layout.tsx`

ã“ã‚Œã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ­£ã—ããƒ‘ã‚¹ãŒè§£æ±ºã•ã‚Œã¾ã™ï¼š

- `/admin/calendar` â†’ `app/admin/calendar/page.tsx`ï¼ˆç®¡ç†è€…ç”¨ï¼‰
- `/calendar` â†’ `app/(user)/calendar/page.tsx`ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ç”¨ï¼‰

---

## ç®¡ç†è€…ç”»é¢ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•

ç®¡ç†è€…æ¨©é™ï¼ˆ`role = 'admin'`ï¼‰ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€ä»¥ä¸‹ã®æ–¹æ³•ã§ç®¡ç†è€…ç”»é¢ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ï¼š

1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”»é¢ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã‹ã‚‰**

   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”»é¢ã®å³ä¸Šã«ã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼ˆã¾ãŸã¯ã‚¢ãƒã‚¿ãƒ¼ï¼‰ã‚’ã‚¯ãƒªãƒƒã‚¯
   - ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€ŒğŸ”§ ç®¡ç†ç”»é¢ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
   - `/admin`ï¼ˆç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼‰ã«ç§»å‹•

2. **ç›´æ¥ URL ã‚¢ã‚¯ã‚»ã‚¹**
   - ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ã‹ã‚‰ `/admin` ã«ã‚¢ã‚¯ã‚»ã‚¹
   - ç®¡ç†è€…æ¨©é™ãŒãªã„å ´åˆã¯ `/calendar` ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

---

## å®Ÿè£…æ™‚ã®æ³¨æ„äº‹é …

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ ã®ä¸ä¸€è‡´

- `menu_prices` ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚«ãƒ©ãƒ åã¯å®Ÿéš›ã® DB ã§ã¯ `menu_item_id` ã ãŒã€å‹å®šç¾©ã§ã¯ `menu_id`
- ä¾¡æ ¼ç®¡ç† API ã§ã¯ `as any` ã‚’ä½¿ç”¨ã—ã¦å¯¾å¿œ
- å°†æ¥çš„ã«å‹å®šç¾©ã‚’ä¿®æ­£ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨

### æœŸé–“ã®é‡è¤‡ãƒã‚§ãƒƒã‚¯

- ä¾¡æ ¼ç®¡ç†ã®æœŸé–“é‡è¤‡ãƒã‚§ãƒƒã‚¯ã¯ç°¡æ˜“å®Ÿè£…
- å®Œå…¨ãªé‡è¤‡ãƒã‚§ãƒƒã‚¯ã¯ `get_menu_price_id` é–¢æ•°ã§å®Ÿè¡Œã•ã‚Œã‚‹
- å°†æ¥çš„ã«é‡è¤‡ãƒã‚§ãƒƒã‚¯ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ”¹å–„ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨

### å‰Šé™¤å‡¦ç†

- æ¥­è€…ãƒ»ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®å‰Šé™¤ã¯ç‰©ç†å‰Šé™¤ã§ã¯ãªãã€`is_active = false` ã«è¨­å®š
- ã“ã‚Œã«ã‚ˆã‚Šã€éå»ã®æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿ã¨ã®æ•´åˆæ€§ã‚’ä¿ã¤
- ä¾¡æ ¼ã®å‰Šé™¤ã¯ç‰©ç†å‰Šé™¤ï¼ˆä¾¡æ ¼å±¥æ­´ã®ç®¡ç†ã®ãŸã‚ï¼‰

---

## ç¢ºèªäº‹é …

- âœ… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç®¡ç†ç”»é¢ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- âœ… æ¥­è€…ç®¡ç†ç”»é¢ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- âœ… ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç®¡ç†ç”»é¢ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- âœ… ä¾¡æ ¼ç®¡ç†ç”»é¢ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- âœ… é›†è¨ˆãƒ»CSV å‡ºåŠ›ç”»é¢ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- âœ… ãƒ«ãƒ¼ãƒˆæ§‹é€ ã®è¡çªãŒè§£æ±ºã•ã‚ŒãŸ
- âœ… ç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯ãŒæ­£ã—ãå‹•ä½œã™ã‚‹

---

## æœªå®Ÿè£…ã®æ©Ÿèƒ½

ä»¥ä¸‹ã®æ©Ÿèƒ½ã¯ä»Šå¾Œå®Ÿè£…äºˆå®šã§ã™ï¼š

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ç”»é¢ï¼ˆ`/admin/users`ï¼‰
- æ“ä½œãƒ­ã‚°é–²è¦§ç”»é¢ï¼ˆ`/admin/logs`ï¼‰
- è‡ªå‹•æ³¨æ–‡å®Ÿè¡Œå±¥æ­´ç”»é¢ï¼ˆ`/admin/auto-order-runs`ï¼‰
- ç· æ—¥è¨­å®šç”»é¢ï¼ˆ`/admin/closing-periods`ï¼‰

---

æœ€çµ‚æ›´æ–°æ—¥: 2025-01-XX
